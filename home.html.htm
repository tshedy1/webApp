<!DOCTYPE html>
<html lang="en"> <head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content= "width=device-width, initial-scale=1.0"> 
    <title>Lesotho Orphanages</title> 
<head>
    <style>
        
        body {
            background-image: url("lesflag.jpg"); /* The image used */
            height: auto; /*to make the image to fill the whole home page*/
            background-position: center; /* Center the image */
            background-repeat: no-repeat; /* Do not repeat the image */
            background-size: cover; /* Resize the background image to cover the entire container */
        }


        h1 {
            text-align: center;
            color: white;
            background-color: #df3434;
            padding: 20px;
        }
		 h2 {
            text-align: center;
            color: skyblue;
            background-color: #ce2121;
            padding: 20px;
        }
        p {
            display: flex;
            text-align: center;
            color: black;
            background-color:whitesmoke;
            padding: 40px;
        }


        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px;
        }

        .card {
            width: 300px;
            height: 300px;
            margin: 10px;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
            transition: 0.3s;
        }

        .card:hover {
            box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
        }

        .card-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            
        }

        .card-content {
            padding: 10px;
            background-color: #6234d5;
        }

        .card-title {
            font-weight: bold;
            font-size: 20px;
        }

        .card-location {
            color: gray;
            font-size: 16px;
        }

        .card-button {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: none;
            background-color: #d53452;
            color: skyblue;
            font-size: 18px;
            cursor: pointer;
        }

        .card-button:hover {
            
            background-color: #28ea52;

        }

        .Orphanage {
            display: none;
            border: 5px;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(227, 28, 28, 0.5);
        }

        .Orphanage-content {
            
            border: 5px solid black;
            padding: 10px;
            position: relative;
            margin: 50px auto;
            width: 400px;
            height: 400px;
            background-color: gray;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
        }

        .Orphanage-close {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            border: none;
            background-color: transparent;
            font-size: 24px;
            cursor: pointer;
        }

        .Orphanage-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .Orphanage-title {
            font-size: 24px;
        }

        .Orphanage-location {
            color: black;
            font-size: 20px;
        }
        .Orphanage-Id {
            color: black;
            font-size: 20px;
        }

        .Orphanage-progress {
            width:100%;
            height: 20px;
            margin: 10px 0;
            background-color: #e0e0e0;
        }

        .Orphanage-progress-bar {
            height: 100%;
            
            background-color: green;
        }

        .Orphanage-donation {
            display: flex;
            justify-content: space-between;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <h1>ORPHANAGES IN LESOTHO</h1>
	<h2>Likhutsana Ha Li Lahloe Tsa Ha Thesele!!</h2>

	<p>
        Lesotho has shown itself to be a very welcoming home and the great gate for orphanages because She has taken care of many children whom their parents had 
        sadly departed due to death. Lesotho has shown that orphans have to live, as it has opened different orphanages to act as homes for those children, 
        without even caring about the kind of families they came from. May those orphans be grateful to the love they have been shown and may the people keep
        donating to also show a helping hand. <br><br>
        <strong>Caring for orphans is the greatest joy to the world!!</strong>
    </p>

    <div class="container" id="container">
        <!-- The orphanage cards will be dynamically added here -->
    </div>
    <div class="Orphanage" id="Orphanage">
        <div class="Orphanage-content">
            <button class="Orphanage-close" id="Orphanage-close">&times;</button>
            <img class="Orphanage-image" id="Orphanage-image" src="" alt="">
            
			
                <div class="Orphanage-title Name: " id= "Orphanage-title"></div>
                <div class="Orphanage-location" id="Orphanage-location"></div>

                <div class="Orphanage-Id" id="Orphanage-Id"></div>
				
					<div class="Orphanage-progress" id="Orphanage-progress">
                    <div class="Orphanage-progress-bar" id="Orphanage-progress-bar"></div>
                </div>
                <div class="Orphanage-donation" id="Orphanage-donation"></div>
            </div>
        </div>
    </div>
    <script>
        // Use JavaScript to fetch data from the API and manipulate the DOM
        const container = document.getElementById("container");
        const Orphanage = document.getElementById("Orphanage");
		
        const OrphanageClose = document.getElementById("Orphanage-close");//to be able to close the contents of one orphanage
        const OrphanageImage = document.getElementById("Orphanage-image");//to be able to show the image contents of an orphanage after the button is clicked
        const OrphanageTitle = document.getElementById("Orphanage-title");//to be able to show the name contents of an orphanage after the button is clicked
		
        const OrphanageLocation = document.getElementById("Orphanage-location");//to be able to show the location contents of an orphanage after the button is clicked
        const OrphanageId = document.getElementById("Orphanage-Id");//to be able to show the id contents of an orphanage after the button is clicked
        
        const OrphanageProgress = document.getElementById("Orphanage-progress");
        const OrphanageProgressBar = document.getElementById("Orphanage-progress-bar");//to be able to show the progress bar contents of an orphanage after the button is clicked
		
        const OrphanageDonation = document.getElementById("Orphanage-donation");//to be able to show the donation and the target contents of an orphanage after the button is clicked

        // Fetch the orphanage data from the url
        fetch("https://lesotho-orphanages.vercel.app")
            .then(response => response.json())
            .then(data => {
			
                // Loop through the data and create a card for each orphanage
                for (let orphanage of data) {
				
                    // Create a card element
                    let card = document.createElement("div");
                    card.className = "card";
					
                    // Create a card image element
                    let cardImage = document.createElement("img");
                    cardImage.className = "card-image";
                    cardImage.src = orphanage.image;//to show the image of the orphanage
                    
					
                    // Create a card content element
                    let cardContent = document.createElement("div");
                    cardContent.className = "card-content";
					
                    // Create a card title element
                    let cardTitle = document.createElement("div");
                    cardTitle.className = "card-title";
                    cardTitle.textContent = orphanage.name;//to show the name of the orphanage  below its image
					
                    // Create a card location element
                    let cardLocation = document.createElement("div");
                    cardLocation.className = "card-location";
                    cardLocation.textContent = Orphanage.location;//to show the location of the orphanage  below its image
					
                    //Create a card ID element
                    let cardId = document.createElement("div");
                    cardId.className = "card-Id";
                    cardId.textContent = Orphanage.id;//to show the id of the orphanage  below its image
					
                    // Create a card button element
                    let cardButton = document.createElement("button");
                    cardButton.className = "card-button";
                    cardButton.textContent = "View Details";//to show the button called view details
					
                    // Add an event listener to the card button
                    cardButton.addEventListener("click", () => {
					
                        // Fetch the orphanage details from the url
                        fetch(`https://lesotho-orphanages.vercel.app/${orphanage.id}`)
                            .then(response => response.json())
                            .then(details => {
                        
                         // Update the Orphanage elements with an orphanage details

                                //to get the image of an orphanage from the url after the button is clicked
                                OrphanageImage.src = details.image;
                                
                                //to get the name of an orphanage from the url after the button is clicked
                                OrphanageTitle.textContent = `Name: ${details.name}`;
								
                                //to get the location of an orphanage from the url after the button is clicked
								OrphanageLocation.textContent = `Location:  ${details.location}`;

                                //to get the id of an orphanage from the url after the button is clicked
                                OrphanageId.textContent = `ID:  ${details.id}`;

                                //to get the amount donated over the target of the donation of an orphanage in a progress bar
                                OrphanageProgressBar.style.width = `${details.donated / details.target * 100}%`;

                                //to get the amount donated over the target of the donation of an orphanage
                                OrphanageDonation.textContent = `Donated: ${details.donated} / Target:  ${details.target}`;

                                // Show the info associated with the Orphanage when the button view details is clicked
                                Orphanage.style.display = "block";
                            })
                            .catch(error => {
                                 // To display the message below if there is no internet or there is a problem in displaying the Orphanage details.
                                console.error(error);
                                alert("Sorry, something went wrong. Please try again later.");
                            });
                    });
                    // Append the card elements to the card content element
                    cardContent.appendChild(cardTitle);
                    cardContent.appendChild(cardLocation);

                    cardContent.appendChild(cardButton);

                    // Append the card image and card content elements to the card element
                    card.appendChild(cardImage);
                    card.appendChild(cardContent);

                    // Append the card element to the container element
                    container.appendChild(card);
                }
            })
            .catch(error => {
                // To display the message below if there is no internet or there is a problem in displaying the Orphanage details.
                console.error(error);
                alert("Sorry, something went wrong. Please try again later.");
            });

        // Add an event listener to the modal close button
        OrphanageClose.addEventListener("click", () => {

            // Hide the info associated with the Orphanage when the ex on the details s clicked
            Orphanage.style.display = "none";
        });

    </script>
</body>
</html>